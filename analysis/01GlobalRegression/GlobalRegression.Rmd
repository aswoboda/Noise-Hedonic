Global Regression Models -- 2005 to 2010
========================================================

This file displays two global regression models from the 2005 to 2010 dataset: (1) that does not include beds, baths, and measurement of building quality (2) includes beds, baths, and measurement of building quality. The latter model only contains properties in Dakota County.

```{r}
library(foreign)
require(zoo)
require(lmtest)
require(car)
workingdata20052010 <- read.dbf("../../../Data/R2GIS/CleanData/Sales20052010.dbf")
workingdata20052010.Dakota <- read.dbf("../../../Data/R2GIS/CleanData/Sales20052010_Dakota.dbf")
model.SaleValue20052010 <- lm (logSALE_VA ~ COUNTY_ID + CITY + factor(SALE_YR)  + ACRES_POLY * CBD_dist + I(ACRES_POLY^2)* I(CBD_dist ^2) +ACRES_POLY*I(CBD_dist^2) +I(ACRES_POLY^2)*CBD_dist + MAX + HOMESTEAD + log(FIN_SQ_FT) + YEAR_BUILT + LAKE_dist + I(LAKE_dist^2) + PARK_dist + I(PARK_dist^2)  + MCA3 + SHOP_dist + I(SHOP_dist^2) + MED_INCOME + COLLEGE_di + SALE_MO, data= workingdata20052010)
model.SaleValue20052010.Dakota <- lm (logSALE_VA ~  CITY + factor(SALE_YR)  + (ACRES_POLY*CBD_dist) + I(ACRES_POLY ^2)*I(CBD_dist ^2) + ACRES_POLY*I(CBD_dist ^2)+ I(ACRES_POLY ^2)*CBD_dist +HOMESTEAD + log(FIN_SQ_FT) + YEAR_BUILT + MAX * I(CBD_dist ^2)+ MAX*CBD_dist + PARK_dist  + LAKE_dist+ I(LAKE_dist ^2) + MCA3 + MED_INCOME + COLLEGE_di+ I(COLLEGE_di ^2) + SHOP_dist + SALE_MO+BEDS + BATH + I(BATH^2) + BLDG_QUAL, data=workingdata20052010.Dakota)
mfx.TRAFFIC.20052010 = (model.SaleValue20052010$coefficients["MAX"]) * (workingdata20052010$SALE_VALUE)
mfx.LAND.20052010 = (model.SaleValue20052010$coefficients["ACRES_POLY"]+ (2*workingdata20052010$ACRES_POLY * model.SaleValue20052010$coefficients["I(ACRES_POLY^2)"])+
  (model.SaleValue20052010$coefficients["ACRES_POLY:CBD_dist"]*workingdata20052010$CBD_dist) + (model.SaleValue20052010$coefficients["ACRES_POLY:I(CBD_dist^2)"]*(workingdata20052010$CBD_dist ^2)) + 
  (model.SaleValue20052010$coefficients["CBD_dist:I(ACRES_POLY^2)"]*2*workingdata20052010$CBD_dist*workingdata20052010$ACRES_POLY)+
  (model.SaleValue20052010$coefficients["I(ACRES_POLY^2):I(CBD_dist^2)"]*2*workingdata20052010$ACRES_POLY*(workingdata20052010$CBD_dist ^2))) * (workingdata20052010$SALE_VALUE)
mfx.TRAFFIC.20052010.Dakota = ((model.SaleValue20052010.Dakota$coefficients["MAX"])+((workingdata20052010.Dakota$CBD_dist * model.SaleValue20052010.Dakota$coefficients["CBD_dist:MAX"])+
  ((workingdata20052010.Dakota$CBD_dist^2 * model.SaleValue20052010.Dakota$coefficients["I(CBD_dist^2):MAX"])))) * (workingdata20052010.Dakota$SALE_VALUE)
mfx.LAND.20052010.Dakota = (model.SaleValue20052010.Dakota$coefficients["ACRES_POLY"]+ (2*workingdata20052010.Dakota$ACRES_POLY * model.SaleValue20052010.Dakota$coefficients["I(ACRES_POLY^2)"])+
  (model.SaleValue20052010.Dakota$coefficients["ACRES_POLY:CBD_dist"]*workingdata20052010.Dakota$CBD_dist) + (model.SaleValue20052010.Dakota$coefficients["ACRES_POLY:I(CBD_dist^2)"]*(workingdata20052010.Dakota$CBD_dist ^2)) + 
  (model.SaleValue20052010.Dakota$coefficients["CBD_dist:I(ACRES_POLY^2)"]*2*workingdata20052010.Dakota$CBD_dist*workingdata20052010.Dakota$ACRES_POLY)+
  (model.SaleValue20052010.Dakota$coefficients["I(ACRES_POLY^2):I(CBD_dist^2)"]*2*workingdata20052010.Dakota$ACRES_POLY*(workingdata20052010.Dakota$CBD_dist ^2))) * (workingdata20052010.Dakota$SALE_VALUE)
model.SaleValue20052010.Dakota.NoBeds <- lm (logSALE_VA ~  CITY + factor(SALE_YR)  + (ACRES_POLY*CBD_dist) + I(ACRES_POLY ^2)*I(CBD_dist ^2) + ACRES_POLY*I(CBD_dist ^2)+ I(ACRES_POLY ^2)*CBD_dist +HOMESTEAD + log(FIN_SQ_FT) + YEAR_BUILT + MAX * I(CBD_dist ^2)+ MAX*CBD_dist + PARK_dist  + LAKE_dist+ I(LAKE_dist ^2) + MCA3 + MED_INCOME + COLLEGE_di+ I(COLLEGE_di ^2) + SHOP_dist + SALE_MO, data=workingdata20052010.Dakota)
mfx.TRAFFIC.20052010.Dakota.NoBeds = ((model.SaleValue20052010.Dakota.NoBeds$coefficients["MAX"])+((workingdata20052010.Dakota$CBD_dist * model.SaleValue20052010.Dakota.NoBeds$coefficients["CBD_dist:MAX"])+
  ((workingdata20052010.Dakota$CBD_dist^2 * model.SaleValue20052010.Dakota.NoBeds$coefficients["I(CBD_dist^2):MAX"])))) * (workingdata20052010.Dakota$SALE_VALUE)


```

Here we compare the two outputs from the regression models. Note that the inclusion of beds, baths, and building quality causes a large increase in the amount of variance in log(Sale Value) explained by the model. Also, the model that includes beds and baths has significant interaction terms with traffic noise whereas the other model does not.

```{r}
summary(model.SaleValue20052010)
summary(model.SaleValue20052010.Dakota)
summary(model.SaleValue20052010.Dakota.NoBeds)
```

Looking at the marginal effects of the two models, note that the marginal effect for both land and traffic noise decreases on average in the model that includes beds, baths, and building quality.

```{r}
#Traffic Noise
summary(mfx.TRAFFIC.20052010)
summary(mfx.TRAFFIC.20052010.Dakota)
summary(mfx.TRAFFIC.20052010.Dakota.NoBeds)
#Land Size
summary(mfx.LAND.20052010)
summary(mfx.LAND.20052010.Dakota)
```

